{"openapi":"3.1.0","info":{"title":"MRM TASKS API","version":"0.1.0"},"paths":{"/health":{"get":{"tags":["health"],"summary":"Health","description":"Simple healthcheck to discover API server","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"text/plain":{"schema":{"type":"string"}}}},"404":{"description":"Not found"}}}},"/api/job":{"post":{"tags":["Job SAP ERP"],"summary":"Create Job Task","description":"Создание новой задачи в SAP ERP","operationId":"create_job_task_api_job_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobSapRequestSchema"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobSapResponseSchema"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/oauth/providers":{"get":{"tags":["oauth"],"summary":"Get Providers","description":"Провайдеры OAUTH","operationId":"get_providers_api_oauth_providers_get","parameters":[{"name":"provider_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Provider Id"}}],"responses":{"200":{"description":"Список провайдеров если provider_id=null иначе redirect_url","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProviderSchema"},"title":"Response 200 Get Providers Api Oauth Providers Get"},"examples":{"get_providers":{"summary":"Список провайдеров","value":[{"id":1,"name":"Лента-Спутник","auth_page_url":"https://oauth-form.vercel.app/"}]},"get_redirect_url":{"summary":"URL для перехода на страницу авторизации","value":{"redirect_url":"https://oauth-form.vercel.app/?callback_url=https://mrm-tasks.app"}}}}}},"404":{"content":{"application/json":{"example":{"status_code":404,"detail":{"type":"provider_not_found_exception","msg":"Провайдер не найден"}},"schema":{"$ref":"#/components/schemas/ErrorSchema"}}},"description":"Not Found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/oauth/callback/{provider_id}":{"post":{"tags":["oauth"],"summary":"Finish Oauth","description":"Завершение авторизации с помощью провайдера","operationId":"finish_oauth_api_oauth_callback__provider_id__post","parameters":[{"name":"provider_id","in":"path","required":true,"schema":{"type":"integer","title":"Provider Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OAuthCodeSchema"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OAuthTokenSchema"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/oauth/sputnik":{"post":{"tags":["oauth"],"summary":"Get Jwt By Lenta Token","description":"Выдача jwt токена пользователю Лента-Спутник","operationId":"get_jwt_by_lenta_token_api_oauth_sputnik_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OAuthTokenSchema"}}}},"404":{"description":"Not found"}},"security":[{"HTTPBearer":[]}]}},"/api/me":{"get":{"tags":["oauth"],"summary":"Me","description":"Информация о пользователе","operationId":"me_api_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserMeSchema"}}}},"404":{"description":"Not found"}},"security":[{"HTTPBearer":[]}]}},"/api/tasks/type_filters":{"get":{"tags":["tasks"],"summary":"Get Task Type Filters","description":"Получение типов задач для фильтрации","operationId":"get_task_type_filters_api_tasks_type_filters_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskTypesSchema"}}}},"404":{"description":"Not found"}}}},"/api/tasks/{task_id}":{"get":{"tags":["tasks"],"summary":"Get Task","description":"Получить задачу по id","operationId":"get_task_api_tasks__task_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskSchema"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tasks":{"get":{"tags":["tasks"],"summary":"Get Tasks","description":"Получить задачи","operationId":"get_tasks_api_tasks_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"q","in":"query","required":false,"schema":{"type":"string","minLength":3,"title":"Q"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Per Page"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TasksPaginatedSchema"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["tasks"],"summary":"Create Task","description":"Создать задачу","operationId":"create_task_api_tasks_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskCreateSchema"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskSchema"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/internal/tasks":{"post":{"tags":["tasks"],"summary":"Create Internal Task","description":"Создать задачу через Sap adapter","operationId":"create_internal_task_api_internal_tasks_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InternalTaskCreateSchema"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskSchema"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tasks/{task_id}/comments":{"get":{"tags":["tasks"],"summary":"Get Task Comments","description":"Получение комментариев по конкретной задаче","operationId":"get_task_comments_api_tasks__task_id__comments_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Per Page"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskCommentsPaginatedSchema"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["tasks"],"summary":"Create Task Comment","description":"Добавить комментарий к задаче","operationId":"create_task_comment_api_tasks__task_id__comments_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskCommentCreateSchema"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskCommentSchema"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tasks/{task_id}/history":{"get":{"tags":["tasks"],"summary":"Get Task History","description":"Получение истории изменений конкретной задачи","operationId":"get_task_history_api_tasks__task_id__history_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Per Page"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskHistoryPaginatedSchema"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tasks/{task_id}/comments/{task_comment_id}":{"put":{"tags":["tasks"],"summary":"Update Task Comment","description":"Обновить комментарий задачи","operationId":"update_task_comment_api_tasks__task_id__comments__task_comment_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}},{"name":"task_comment_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Comment Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskCommentUpdateSchema"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskCommentSchema"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tasks/{task_id}/workflow/actions":{"get":{"tags":["tasks"],"summary":"Get Task Workflow Actions","description":"Получение доступных действий (шагов) конкретной задачи","operationId":"get_task_workflow_actions_api_tasks__task_id__workflow_actions_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskActionsSchema"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["tasks"],"summary":"Update Task Status","description":"Изменяет статус задачи","operationId":"update_task_status_api_tasks__task_id__workflow_actions_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskStatusUpdateSchema"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskSchema"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tasks/{task_id}/custom-fields":{"get":{"tags":["tasks"],"summary":"Get Task Custom Fields","description":"Получение кастомных полей конкретной задачи","operationId":"get_task_custom_fields_api_tasks__task_id__custom_fields_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskCustomFieldsSchema"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tasks/by/status":{"get":{"tags":["tasks"],"summary":"Get Tasks By Status","description":"Получить список задач с указанным статусом","operationId":"get_tasks_by_status_api_tasks_by_status_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"status","in":"query","required":true,"schema":{"$ref":"#/components/schemas/TaskStatusTypeEnum","title":"Статус задачи"}},{"name":"q","in":"query","required":false,"schema":{"type":"string","minLength":3,"title":"Q"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Per Page"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TasksPaginatedSchema"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/internal/tasks/{task_id}/custom-fields":{"post":{"tags":["tasks"],"summary":"Create Update Task Custom Fields","description":"Добавить/Обновить кастомные поля задачи","operationId":"create_update_task_custom_fields_api_internal_tasks__task_id__custom_fields_post","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"integer","title":"Task Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TaskCustomFieldsCreateSchema"},"title":"Data"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskCustomFieldsSchema"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tasks/count":{"get":{"tags":["tasks"],"summary":"Get Tasks Count","description":"Получить количество новых и активных задач","operationId":"get_tasks_count_api_tasks_count_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskCountSchema"}}}},"404":{"description":"Not found"}},"security":[{"HTTPBearer":[]}]}},"/api/internal/tasks/custom-fields":{"get":{"tags":["tasks"],"summary":"Get Tasks By Custom Field","description":"Получить задачи по custom-fields","operationId":"get_tasks_by_custom_field_api_internal_tasks_custom_fields_get","parameters":[{"name":"slug","in":"query","required":true,"schema":{"type":"string","title":"Slug"}},{"name":"value","in":"query","required":true,"schema":{"type":"string","title":"Value"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TasksIdsSchema"}}}},"404":{"description":"Not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tasks/priority":{"get":{"tags":["tasks"],"summary":"Get Task Priorities","description":"Получить список доступных приоритетов для задач","operationId":"get_task_priorities_api_tasks_priority_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TasksPrioritiesSchema"}}}},"404":{"description":"Not found"}},"security":[{"HTTPBearer":[]}]}}},"components":{"schemas":{"CreateModeEnum":{"type":"string","enum":["ВИ","СЦН","ЗСА"],"title":"CreateModeEnum"},"CustomFieldValueTypeEnum":{"type":"string","enum":["string","number","date","text","json","boolean"],"title":"CustomFieldValueTypeEnum"},"EmployeeSchema":{"properties":{"employeecode":{"type":"string","title":"Employeecode","description":"Табельный номер"},"fullname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Fullname","description":"ФИО"},"position":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Position","description":"Название позиции"},"birthdate":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Birthdate","description":"Дата рождения"}},"type":"object","required":["employeecode"],"title":"EmployeeSchema"},"ErrorSchema":{"properties":{"status_code":{"type":"integer","title":"Status Code"},"detail":{"type":"object","title":"Detail"}},"type":"object","required":["status_code","detail"],"title":"ErrorSchema"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HistoryChangeTypeEnum":{"type":"string","enum":["created","updated","deleted"],"title":"HistoryChangeTypeEnum"},"InternalTaskCreateSchema":{"properties":{"title":{"type":"string","title":"Title","description":"Название"},"type_id":{"type":"integer","title":"Type Id","description":"Тип Id"},"description":{"type":"string","title":"Description","description":"Описание"},"date_from":{"type":"string","format":"date","title":"Date From","description":"Дата начала задачи"},"date_to":{"type":"string","format":"date","title":"Date To","description":"Дата завершения задачи"},"department_id":{"type":"integer","title":"Department Id"},"priority_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Priority Id","description":"Приоритет задачи"},"validator":{"anyOf":[{"$ref":"#/components/schemas/EmployeeSchema"},{"type":"null"}],"description":"Согласующий"},"executor":{"anyOf":[{"$ref":"#/components/schemas/EmployeeSchema"},{"type":"null"}],"description":"Исполнитель"},"owner":{"anyOf":[{"$ref":"#/components/schemas/EmployeeSchema"},{"type":"null"}],"description":"Создатель"},"custom_fields":{"additionalProperties":{"$ref":"#/components/schemas/TaskCustomFieldValueSchema-Input"},"type":"object","title":"Custom Fields"}},"type":"object","required":["title","type_id","description","date_from","date_to","department_id","custom_fields"],"title":"InternalTaskCreateSchema"},"JobSapRequestSchema":{"properties":{"create_mode":{"$ref":"#/components/schemas/CreateModeEnum","description":"Режим создания"},"shop_number":{"type":"integer","title":"Shop Number","description":"Номер магазина"},"task_id_mrm":{"type":"integer","title":"Task Id Mrm","description":"Номер задачи в МРМ"},"task_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Task Name","description":"Название задания"},"task_positions":{"items":{"$ref":"#/components/schemas/SapCodeSchema"},"type":"array","title":"Task Positions","description":"Список позиций"}},"type":"object","required":["create_mode","shop_number","task_id_mrm","task_name","task_positions"],"title":"JobSapRequestSchema"},"JobSapResponseSchema":{"properties":{"task_positions":{"items":{"$ref":"#/components/schemas/JobTaskPositionSchema"},"type":"array","title":"Task Positions"}},"type":"object","required":["task_positions"],"title":"JobSapResponseSchema"},"JobTaskPositionSchema":{"properties":{"task_number":{"type":"string","title":"Task Number"},"sap_code":{"type":"integer","title":"Sap Code"},"error_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Text"}},"type":"object","required":["task_number","sap_code","error_text"],"title":"JobTaskPositionSchema"},"JsonDict-Input":{"additionalProperties":{"$ref":"#/components/schemas/JsonValue-Input"},"type":"object"},"JsonDict-Output":{"additionalProperties":{"$ref":"#/components/schemas/JsonValue-Output"},"type":"object"},"JsonValue-Input":{"anyOf":[{"type":"integer"},{"type":"number"},{"type":"string"},{"type":"boolean"},{"items":{"$ref":"#/components/schemas/JsonValue-Input"},"type":"array"},{"$ref":"#/components/schemas/JsonDict-Input"},{"type":"null"}]},"JsonValue-Output":{"anyOf":[{"type":"integer"},{"type":"number"},{"type":"string"},{"type":"boolean"},{"items":{"$ref":"#/components/schemas/JsonValue-Output"},"type":"array"},{"$ref":"#/components/schemas/JsonDict-Output"},{"type":"null"}]},"OAuthCodeSchema":{"properties":{"auth_code":{"type":"string","title":"Auth Code","description":"Код авторизации"},"expired":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Expired"}},"type":"object","required":["auth_code"],"title":"OAuthCodeSchema"},"OAuthTokenSchema":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"},"expires_in":{"type":"integer","title":"Expires In"},"refresh_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Refresh Token"}},"type":"object","required":["access_token","token_type","expires_in"],"title":"OAuthTokenSchema"},"PaginationSchema":{"properties":{"page":{"type":"integer","title":"Page"},"items_per_page":{"type":"integer","title":"Items Per Page"},"total_pages":{"type":"integer","title":"Total Pages"},"total":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total"}},"type":"object","required":["page","items_per_page","total_pages"],"title":"PaginationSchema"},"PriorityShortSchema":{"properties":{"name":{"type":"string","title":"Name"},"color":{"type":"string","title":"Color"}},"type":"object","required":["name","color"],"title":"PriorityShortSchema"},"ProviderSchema":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name","description":"Название сервис-провайдера авторизации"},"app_id":{"type":"string","title":"App Id","description":"Идентификатор приложения"},"auth_page_url":{"type":"string","title":"Auth Page Url","description":"URL сервис-провайдера авторизации"}},"type":"object","required":["id","name","app_id","auth_page_url"],"title":"ProviderSchema"},"SapCodeSchema":{"properties":{"sap_code":{"type":"integer","title":"Sap Code","description":"SAP код товара"}},"type":"object","required":["sap_code"],"title":"SapCodeSchema"},"TaskActionsSchema":{"properties":{"actions":{"items":{"$ref":"#/components/schemas/TaskWorkflowActionSchema"},"type":"array","title":"Actions","description":"Массив, который содержит в себе действия задачи, которые можно применять для задачи"}},"type":"object","required":["actions"],"title":"TaskActionsSchema"},"TaskCommentCreateSchema":{"properties":{"text":{"type":"string","title":"Text","description":"Текст комментария"}},"type":"object","required":["text"],"title":"TaskCommentCreateSchema"},"TaskCommentSchema":{"properties":{"id":{"type":"integer","title":"Id","description":"Уникальный идентификатор комментария"},"author":{"$ref":"#/components/schemas/UserShortSchema","description":"Код сотрудника, оставившего комментарий"},"text":{"type":"string","title":"Text","description":"Текст комментария"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Дата и время добавления комментария"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","description":"Дата и время обновления комментария"}},"type":"object","required":["id","author","text","created_at","updated_at"],"title":"TaskCommentSchema"},"TaskCommentUpdateSchema":{"properties":{"text":{"type":"string","title":"Text","description":"Текст комментария"}},"type":"object","required":["text"],"title":"TaskCommentUpdateSchema"},"TaskCommentsPaginatedSchema":{"properties":{"task_id":{"type":"integer","title":"Task Id","description":"Уникальный идентификатор задачи"},"comments":{"items":{"$ref":"#/components/schemas/TaskCommentSchema"},"type":"array","title":"Comments"},"pagination":{"$ref":"#/components/schemas/PaginationSchema"}},"type":"object","required":["task_id","comments","pagination"],"title":"TaskCommentsPaginatedSchema"},"TaskCountSchema":{"properties":{"new":{"type":"integer","title":"New","description":"Количество новых задач"},"in_progress":{"type":"integer","title":"In Progress","description":"Количество задач в работе"}},"type":"object","required":["new","in_progress"],"title":"TaskCountSchema"},"TaskCreateSchema":{"properties":{"title":{"type":"string","title":"Title","description":"Название"},"type_id":{"type":"integer","title":"Type Id","description":"Тип Id"},"description":{"type":"string","title":"Description","description":"Описание"},"date_from":{"type":"string","format":"date-time","title":"Date From","description":"Дата начала задачи"},"date_to":{"type":"string","format":"date-time","title":"Date To","description":"Дата завершения задачи"},"executor_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Executor Id","description":"Id исполнителя"},"validator_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Validator Id","description":"Id согласующего"},"department_id":{"type":"integer","title":"Department Id"},"priority_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Priority Id","description":"Приоритет задачи"}},"type":"object","required":["title","type_id","description","date_from","date_to","department_id"],"title":"TaskCreateSchema"},"TaskCustomFieldValueSchema-Input":{"properties":{"value":{"anyOf":[{"type":"string"},{"type":"number"},{"type":"boolean"},{"$ref":"#/components/schemas/JsonDict-Input"}],"title":"Value","description":"Значение поля"},"type":{"$ref":"#/components/schemas/CustomFieldValueTypeEnum","description":"Тип поля"},"order":{"type":"integer","title":"Order","description":"Порядковый номер"},"name":{"type":"string","title":"Name","description":"Название поля"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Описание поля"}},"type":"object","required":["value","type","order","name","description"],"title":"TaskCustomFieldValueSchema"},"TaskCustomFieldValueSchema-Output":{"properties":{"value":{"anyOf":[{"type":"string"},{"type":"number"},{"type":"boolean"},{"$ref":"#/components/schemas/JsonDict-Output"}],"title":"Value","description":"Значение поля"},"type":{"$ref":"#/components/schemas/CustomFieldValueTypeEnum","description":"Тип поля"},"order":{"type":"integer","title":"Order","description":"Порядковый номер"},"name":{"type":"string","title":"Name","description":"Название поля"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Описание поля"}},"type":"object","required":["value","type","order","name","description"],"title":"TaskCustomFieldValueSchema"},"TaskCustomFieldValueShortSchema":{"properties":{"value":{"anyOf":[{"type":"string"},{"type":"number"},{"type":"boolean"},{"$ref":"#/components/schemas/JsonDict-Output"}],"title":"Value","description":"Значение поля"},"type":{"$ref":"#/components/schemas/CustomFieldValueTypeEnum","description":"Тип поля"},"order":{"type":"integer","title":"Order","description":"Порядковый номер"}},"type":"object","required":["value","type","order"],"title":"TaskCustomFieldValueShortSchema"},"TaskCustomFieldsCreateSchema":{"properties":{"slug":{"type":"string","title":"Slug","description":"Уникальный идентификатор поля"},"value":{"anyOf":[{"type":"string"},{"type":"number"},{"type":"boolean"},{"$ref":"#/components/schemas/JsonDict-Input"}],"title":"Value","description":"Значение поля"}},"type":"object","required":["slug","value"],"title":"TaskCustomFieldsCreateSchema"},"TaskCustomFieldsSchema":{"properties":{"custom_fields":{"additionalProperties":{"$ref":"#/components/schemas/TaskCustomFieldValueSchema-Output"},"type":"object","title":"Custom Fields"}},"type":"object","required":["custom_fields"],"title":"TaskCustomFieldsSchema"},"TaskHistoryPaginatedSchema":{"properties":{"task_id":{"type":"integer","title":"Task Id","description":"Уникальный идентификатор задачи"},"history":{"items":{"$ref":"#/components/schemas/UserHistorySchema"},"type":"array","title":"History"},"pagination":{"$ref":"#/components/schemas/PaginationSchema"}},"type":"object","required":["task_id","history","pagination"],"title":"TaskHistoryPaginatedSchema"},"TaskPrioritySchema":{"properties":{"id":{"type":"integer","title":"Id","description":"Уникальный идентификатор поля"},"name":{"type":"string","title":"Name","description":"Название приоритета задачи"},"description":{"type":"string","title":"Description","description":"Описание приоритета задачи"},"color":{"type":"string","title":"Color","description":"Цвет приоритета"},"order":{"type":"integer","title":"Order"}},"type":"object","required":["id","name","description","color","order"],"title":"TaskPrioritySchema"},"TaskSchema":{"properties":{"id":{"type":"integer","title":"Id"},"title":{"type":"string","title":"Title","description":"Название"},"description":{"type":"string","title":"Description","description":"Описание"},"type":{"$ref":"#/components/schemas/TaskTypeSchema","description":"Тип"},"current_status":{"type":"string","title":"Current Status","description":"Текущий статус"},"date_from":{"type":"string","format":"date-time","title":"Date From","description":"Дата начала задачи"},"date_to":{"type":"string","format":"date-time","title":"Date To","description":"Дата завершения задачи"},"assignee":{"anyOf":[{"$ref":"#/components/schemas/UserShortSchema"},{"type":"null"}],"description":"Исполнитель"},"validator":{"anyOf":[{"$ref":"#/components/schemas/UserShortSchema"},{"type":"null"}],"description":"Исполнитель"},"created_at":{"type":"string","format":"date-time","title":"Created At","description":"Дата создания"},"updated_at":{"type":"string","format":"date-time","title":"Updated At","description":"Дата изменения"},"custom_fields":{"additionalProperties":{"$ref":"#/components/schemas/TaskCustomFieldValueShortSchema"},"type":"object","title":"Custom Fields"},"priority":{"$ref":"#/components/schemas/PriorityShortSchema","description":"Приоритет задачи и его цвет"},"department_id":{"type":"integer","title":"Department Id"}},"type":"object","required":["id","title","description","type","current_status","date_from","date_to","assignee","validator","created_at","updated_at","custom_fields","priority","department_id"],"title":"TaskSchema"},"TaskStatusTypeEnum":{"type":"string","enum":["new","in_progress","done"],"title":"TaskStatusTypeEnum","description":"От порядка атрибутов зависит TaskWorkFlowActionDirectionEnum"},"TaskStatusUpdateSchema":{"properties":{"action_id":{"type":"integer","title":"Action Id","description":"Уникальный идентификатор действия (шага) задачи"}},"type":"object","required":["action_id"],"title":"TaskStatusUpdateSchema"},"TaskTypeEnum":{"type":"string","enum":["auto","manual"],"title":"TaskTypeEnum"},"TaskTypeSchema":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name","description":"Название"},"type":{"$ref":"#/components/schemas/TaskTypeEnum","description":"Тип"},"slug":{"type":"string","title":"Slug","description":"Текстовое сокращение"}},"type":"object","required":["id","name","type","slug"],"title":"TaskTypeSchema"},"TaskTypesSchema":{"properties":{"filters":{"items":{"$ref":"#/components/schemas/TaskTypeSchema"},"type":"array","title":"Filters","description":"Массив, который содержит в себе типы задач"}},"type":"object","required":["filters"],"title":"TaskTypesSchema"},"TaskWorkFlowActionDirectionEnum":{"type":"string","enum":["forward","backward"],"title":"TaskWorkFlowActionDirectionEnum"},"TaskWorkflowActionSchema":{"properties":{"id":{"type":"integer","title":"Id","description":"Уникальный идентификатор действия (шага) задачи"},"name":{"type":"string","title":"Name","description":"Название действия"},"next_status_type":{"$ref":"#/components/schemas/TaskStatusTypeEnum","description":"Тип действия"},"direction":{"$ref":"#/components/schemas/TaskWorkFlowActionDirectionEnum","description":"Направление действия"}},"type":"object","required":["id","name","next_status_type","direction"],"title":"TaskWorkflowActionSchema"},"TasksIdsSchema":{"properties":{"tasks":{"items":{"type":"integer"},"type":"array","title":"Tasks"}},"type":"object","required":["tasks"],"title":"TasksIdsSchema"},"TasksPaginatedSchema":{"properties":{"array":{"items":{"$ref":"#/components/schemas/TaskSchema"},"type":"array","title":"Array"},"page":{"type":"integer","title":"Page"},"items_per_page":{"type":"integer","title":"Items Per Page"},"total_pages":{"type":"integer","title":"Total Pages"},"total":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total"}},"type":"object","required":["array","page","items_per_page","total_pages"],"title":"TasksPaginatedSchema"},"TasksPrioritiesSchema":{"properties":{"priorities":{"items":{"$ref":"#/components/schemas/TaskPrioritySchema"},"type":"array","title":"Priorities"}},"type":"object","required":["priorities"],"title":"TasksPrioritiesSchema"},"UserHistorySchema":{"properties":{"id":{"type":"integer","title":"Id","description":"Уникальный идентификатор истории"},"changed_by":{"$ref":"#/components/schemas/UserShortSchema","description":"Код сотрудника, сделавшего изменение"},"entity_type":{"type":"string","title":"Entity Type","description":"Тип сущности"},"change_type":{"$ref":"#/components/schemas/HistoryChangeTypeEnum","description":"Тип изменения"},"changes":{"type":"object","title":"Changes","description":"Изменения"},"changed_at":{"type":"string","format":"date-time","title":"Changed At","description":"Дата и время добавления комментария"}},"type":"object","required":["id","changed_by","entity_type","change_type","changes","changed_at"],"title":"UserHistorySchema"},"UserMeSchema":{"properties":{"employeecode":{"type":"string","title":"Employeecode","description":"Табельный номер"},"fullname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Fullname","description":"ФИО"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender","description":"Пол"},"workemail":{"type":"string","title":"Workemail","description":"Рабочий email"},"position":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Position","description":"Название позиции"},"devision":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Devision","description":"Отдел"},"phone":{"type":"string","title":"Phone","description":"Номер телефона"},"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City","description":"Город"},"birthdate":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Birthdate","description":"Дата рождения"},"id":{"type":"integer","title":"Id"}},"type":"object","required":["employeecode","workemail","phone","id"],"title":"UserMeSchema"},"UserShortSchema":{"properties":{"id":{"type":"integer","title":"Id","description":"Id Пользователя"},"employee_code":{"type":"string","title":"Employee Code","description":"Табельный номер"},"employee_name":{"type":"string","title":"Employee Name","description":"Дата создания"}},"type":"object","required":["id","employee_code","employee_name"],"title":"UserShortSchema"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}